<!doctype html>
<html lang="hu">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Meg√°ll√≥helyi Menetrend ‚Äì Bluestar</title>
<link rel="preconnect" href="https://unpkg.com">
<link rel="stylesheet" href="https://unpkg.com/modern-css-reset/dist/reset.min.css">
<link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>
<style>
:root{
  --bg:#121212; --card:#1e1f24; --text:#e7e7ea; --muted:#9aa3b2;
  --primary:#7aa6ff; --chip:#2a2d36; --ok:#29d36a; --warn:#ffcf5a; --danger:#f16b6b;
  --bar:#1b1c21; --divider:#2a2c34;
}
*{box-sizing:border-box}
body{background:var(--bg);color:var(--text);font:16px/1.45 system-ui, -apple-system, Segoe UI, Inter, Roboto, sans-serif}
a{color:var(--primary)}
.app{display:grid;grid-template-rows:56px 1fr}
.topbar{height:56px;background:var(--bar);display:flex;align-items:center;gap:12px;padding:0 12px;border-bottom:1px solid var(--divider);position:sticky;top:0;z-index:10}
.iconbtn{width:36px;height:36px;border-radius:999px;background:#262833;display:grid;place-items:center;cursor:pointer}
.title{font-weight:800;font-size:18px}
.lang{margin-left:auto;background:#262833;border:1px solid #2f3140;color:var(--text);border-radius:8px;padding:6px 8px}
.container{max-width:980px;margin:16px auto 80px;padding:0 12px}
.card{background:var(--card);border:1px solid var(--divider);border-radius:14px;padding:14px;box-shadow:0 8px 24px rgba(0,0,0,.25)}
.row{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
.btn{background:var(--primary);color:#fff;border:none;border-radius:10px;padding:10px 14px;font-weight:700;cursor:pointer}
.btn.ghost{background:#262833;border:1px solid #2f3140;color:var(--text)}
.btn.danger{background:var(--danger)}
.input,select{background:#262833;color:var(--text);border:1px solid #2f3140;border-radius:10px;padding:10px 12px}
.search{display:grid;gap:10px}
.search .field{display:flex;gap:10px}
.segment{background:#262833;border:1px solid #2f3140;border-radius:9px;display:inline-grid;grid-auto-flow:column}
.segment input{display:none}
.segment label{padding:8px 12px;cursor:pointer}
.segment input:checked + label{background:#344155;border-radius:7px}
.sectionTitle{margin:12px 0 8px;font-weight:800}
.list{display:grid;gap:10px}
.item{display:grid;grid-template-columns:auto 1fr auto;align-items:center;gap:10px;background:#181a21;border:1px solid #2a2c34;border-radius:12px;padding:12px}
.pill{min-width:52px;height:36px;border-radius:8px;background:var(--chip);display:grid;place-items:center;font-weight:800}
.mono{font-variant-numeric:tabular-nums}
.muted{color:var(--muted)}
.time.ok{color:var(--ok);font-weight:800}
.time.warn{color:var(--warn);font-weight:800}
.time.due{color:var(--ok);font-weight:900}
.chips{display:flex;flex-wrap:wrap;gap:6px}
.chip{background:#2b2e39;border:1px solid #3a3f52;border-radius:7px;padding:6px 10px;font-weight:700}
.divider{height:1px;background:var(--divider);margin:10px 0}
.toast{position:fixed;left:16px;right:16px;bottom:16px;background:#2f3a63;color:#fff;padding:12px 14px;border-radius:12px;display:none;z-index:2000}
.toast.show{display:block}
.modal{position:fixed;inset:0;background:rgba(0,0,0,.5);display:none;place-items:center;z-index:1200}
.modal .box{background:var(--card);border:1px solid var(--divider);border-radius:14px;padding:14px;width:min(720px,94vw);max-height:88vh;overflow:auto}
.map{height:360px;border-radius:12px;overflow:hidden}
.drawer{position:fixed;inset:0;display:none;z-index:1500}
.drawer .bg{position:absolute;inset:0;background:rgba(0,0,0,.4)}
.drawer .panel{position:absolute;left:0;top:0;bottom:0;width:min(320px,86vw);background:#1b1c21;border-right:1px solid var(--divider);padding:14px 10px}
.menu h3{font-size:18px;margin:6px 10px 10px;font-weight:800}
.menu .mi{display:flex;align-items:center;gap:10px;padding:10px;border-radius:10px;cursor:pointer}
.menu .mi:hover{background:#24262f}
.kv{display:flex;gap:8px;flex-wrap:wrap}
.kv .kvp{background:#262833;border:1px solid #2f3140;border-radius:8px;padding:6px 8px}
.badge{padding:2px 8px;border-radius:999px;border:1px solid #3a3f52;background:#2b2e39}
</style>
</head>
<body>
<div class="app">
  <div class="topbar">
    <div id="openDrawer" class="iconbtn" title="Men√º">‚ò∞</div>
    <div class="title">Meg√°ll√≥helyi Menetrend</div>
    <div id="openSettings" class="iconbtn" title="Be√°ll√≠t√°sok">‚öôÔ∏è</div>
    <select id="lang" class="lang"></select>
  </div>

  <div class="container">
    <div class="card">
      <div class="kv">
        <div class="kvp">UK: <span id="ukTime">--:--:--</span></div>
        <div class="kvp">Build: <span id="build">-</span></div>
        <div class="kvp">Friss√≠t√©s: 20 s</div>
        <div class="kvp"><span id="liveState" class="badge">LIVE: ‚Äì</span> <span id="gtfsState" class="badge">GTFS: ‚Äì</span></div>
      </div>
      <div class="divider"></div>
      <div class="chips" id="highlights">
        <div class="chip">H5</div><div class="chip">1</div><div class="chip">12</div>
        <div class="chip">14</div><div class="chip">59A</div><div class="chip">16</div>
      </div>
    </div>

    <div class="card" style="margin-top:12px">
      <div class="row" style="justify-content:space-between">
        <div class="segment">
          <input type="radio" name="mode" id="modeStop" checked><label for="modeStop">Meg√°ll√≥</label>
          <input type="radio" name="mode" id="modeRoute"><label for="modeRoute">Viszonylat</label>
        </div>
        <div class="muted">Kedvencek gyors el√©r√©s: alul</div>
      </div>

      <div class="search" style="margin-top:10px">
        <div class="field">
          <input id="q" class="input" placeholder="Meg√°ll√≥ vagy viszonylat keres√©se" style="flex:1" />
          <button id="btnSearch" class="btn">Keres√©s</button>
        </div>
        <select id="results" class="input" style="display:none"></select>
      </div>

      <div id="stopPanel" style="display:none; margin-top:10px">
        <div class="row">
          <input id="windowMin" class="input" type="number" value="60" style="max-width:120px" />
          <div class="muted">perc</div>
          <button id="refreshBtn" class="btn ghost">Friss√≠t</button>
        </div>
        <div class="sectionTitle">Indul√°sok</div>
        <div id="departures" class="list"></div>
      </div>

      <div id="routePanel" style="display:none; margin-top:6px">
        <div id="routeActions" class="list" style="display:none">
          <div class="item"><div class="pill">üß≠</div><div>T√©rk√©p megtekint√©se</div><div><button id="btnShowMap" class="btn ghost">Megnyit</button></div></div>
          <div class="item"><div class="pill">‚á®</div><div>Ir√°nyok √©s meg√°ll√≥k</div><div><button id="btnShowDirs" class="btn ghost">Megnyit</button></div></div>
        </div>
        <div id="mapWrap" class="map" style="display:none"></div>
        <div id="routeStops" class="list" style="display:none"></div>
      </div>

      <div class="divider" style="margin-top:12px"></div>
      <div class="row">
        <button id="favToggle" class="btn ghost">‚òÜ Kedvencek</button>
        <div class="muted mono" id="selectedInfo" style="margin-left:auto">‚Äî</div>
      </div>
    </div>

    <div class="card" style="margin-top:12px">
      <div class="sectionTitle">Kedvenc meg√°ll√≥k √©s viszonylatok</div>
      <div class="row" style="align-items:flex-start">
        <div style="flex:1">
          <strong>Meg√°ll√≥k</strong>
          <div id="favStops" class="list" style="margin-top:8px"></div>
        </div>
        <div style="flex:1">
          <strong>Viszonylatok</strong>
          <div id="favRoutes" class="list" style="margin-top:8px"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<!-- Drawer -->
<div id="drawer" class="drawer">
  <div class="bg"></div>
  <div class="panel">
    <div class="menu">
      <h3>Meg√°ll√≥helyi Menetrend</h3>
      <div class="mi" id="miInfo">üöå K√∂zleked√©si inform√°ci√≥k</div>
      <div class="mi" id="miFavRefresh">‚Üª Kedvencek friss√≠t√©se</div>
      <div class="mi" id="miFavClear">üóëÔ∏è Kedvencek t√∂rl√©se</div>
      <div class="mi" id="miTheme">üí° T√©ma v√°lt√°sa</div>
      <div class="mi" id="miAbout">‚ÑπÔ∏è Az alkalmaz√°sr√≥l</div>
    </div>
  </div>
</div>

<!-- Settings modal -->
<div id="settings" class="modal">
  <div class="box">
    <div class="row" style="justify-content:space-between">
      <strong>Be√°ll√≠t√°sok</strong>
      <button id="closeSettings" class="btn">√ó</button>
    </div>
    <div class="sectionTitle">API base URL</div>
    <div class="row">
      <input id="apiBase" class="input" placeholder="https://...railway.app" style="flex:1" />
      <button id="saveApiBase" class="btn">Ment√©s</button>
      <button id="resetApiBase" class="btn ghost">Reset</button>
    </div>
    <div class="sectionTitle" style="margin-top:12px">Live feed (BODS SIRI-VM)</div>
    <div class="row">
      <input id="feedUrl" class="input" placeholder="https://data.bus-data.dft.gov.uk/api/v1/datafeed/.../?api_key=..." style="flex:1" />
      <button id="saveFeed" class="btn">Save</button>
    </div>
    <div class="sectionTitle" style="margin-top:12px">GTFS ZIP felt√∂lt√©s</div>
    <div class="row">
      <input id="gtfsFile" type="file" accept=".zip" class="input" />
      <button id="uploadGtfs" class="btn">Felt√∂lt√©s</button>
    </div>
  </div>
</div>

<!-- Trip modal -->
<div id="tripModal" class="modal">
  <div class="box" id="tripBox"></div>
</div>

<div id="toast" class="toast"></div>

<script>
/* ===== Helpers ===== */
const $=s=>document.querySelector(s);
const el=(t,c,txt)=>{const e=document.createElement(t); if(c)e.className=c; if(txt!=null)e.textContent=txt; return e;}
const sleep=ms=>new Promise(r=>setTimeout(r,ms));
const UKfmt=new Intl.DateTimeFormat([], {hour:'2-digit',minute:'2-digit',second:'2-digit',hour12:false,timeZone:'Europe/London'});
function showToast(msg, ok=true){ const t=$("#toast"); t.textContent=msg; t.style.background= ok ? "#2f3a63" : "#7a2d2d"; t.classList.add("show"); setTimeout(()=>t.classList.remove("show"), 3200); }
function setSel(select, arr, valKey, textKey){ select.innerHTML=""; arr.forEach(x=>{ const o=document.createElement("option"); o.value=x[valKey]; o.textContent=x[textKey]; select.appendChild(o); }); select.style.display=arr.length?"block":"none"; }

/* ===== Config (API base) ===== */
function apiBase(){ return localStorage.getItem("api_base")||""; }
function api(path, init){ const base=apiBase(); const url = base? base.replace(/\/$/,"")+path : path; return fetch(url, init); }

/* ===== Lang (EN/HU r√∂vid) ===== */
const LANGS=["HU","EN"]; const STR={
  HU:{search:"Keres√©s",stop:"Meg√°ll√≥",route:"Viszonylat",mapOpen:"Megnyit",dirsOpen:"Megnyit",favs:"Kedvencek"},
  EN:{search:"Search",stop:"Stop",route:"Route",mapOpen:"Open",dirsOpen:"Open",favs:"Favourites"}
};
let LANG=localStorage.getItem("lang")||"HU";
function fillLang(){ const sel=$("#lang"); sel.innerHTML=""; LANGS.forEach(c=>{ const o=el("option","",c); o.value=c; if(c===LANG) o.selected=true; sel.appendChild(o);}); sel.onchange=()=>{ LANG=sel.value; localStorage.setItem("lang",LANG); }; }
fillLang();

/* ===== Drawer + Settings ===== */
const drawer=$("#drawer"); $("#openDrawer").onclick=()=>drawer.style.display="block"; drawer.querySelector(".bg").onclick=()=>drawer.style.display="none";
const settings=$("#settings"); $("#openSettings").onclick=async()=>{ settings.style.display="grid"; $("#apiBase").value=apiBase(); try{ const r=await api("/api/live/config"); const j=await r.json(); $("#feedUrl").value=j.feed_url||""; }catch{} };
$("#closeSettings").onclick=()=>settings.style.display="none";
$("#saveApiBase").onclick=()=>{ localStorage.setItem("api_base", $("#apiBase").value.trim()); showToast("API base elmentve"); };
$("#resetApiBase").onclick=()=>{ localStorage.removeItem("api_base"); $("#apiBase").value=""; showToast("API base vissza√°ll√≠tva"); };
$("#saveFeed").onclick=async()=>{ try{ const feed=$("#feedUrl").value.trim(); const r=await api("/api/live/config",{method:"POST",headers:{'Content-Type':'application/json'},body:JSON.stringify({feed_url:feed})}); if(!r.ok) throw new Error(await r.text()); showToast("Live feed elmentve"); }catch(e){ showToast("Live feed ment√©s hiba", false); } };
$("#uploadGtfs").onclick=async()=>{ const f=$("#gtfsFile").files?.[0]; if(!f){ showToast("V√°lassz ZIP f√°jlt",false); return; } const fd=new FormData(); fd.append("file", f); try{ const r=await api("/api/upload",{method:"POST",body:fd}); const j=await r.json().catch(()=>({})); if(!r.ok){ throw new Error(JSON.stringify(j)||r.statusText); } showToast("GTFS felt√∂ltve, feldolgoz√°s elindult"); }catch(e){ showToast("GTFS felt√∂lt√©s hiba",false); } };

/* ===== Status tick ===== */
async function tick(){
  try{
    const r=await api("/api/status"); const j=await r.json();
    $("#ukTime").textContent=j.uk_time||"‚Äì:‚Äì:‚Äì"; $("#build").textContent=j.build||"-";
    $("#liveState").textContent="LIVE: "+(j.live_feed_configured?"OK":"‚Äî");
    $("#gtfsState").textContent="GTFS: "+(j.gtfs_loaded?"OK":"‚Äî");
  }catch{}
}
setInterval(tick, 1000); tick();

/* ===== Search & Selection ===== */
let currentStop=null; let currentRoute=null;
const results=$("#results"); const q=$("#q"); const stopPanel=$("#stopPanel"); const routePanel=$("#routePanel");
const selectedInfo=$("#selectedInfo");
function updateSelectedInfo(){ if(currentStop){ selectedInfo.textContent=`Meg√°ll√≥: ${currentStop.name||currentStop.id}`; } else if(currentRoute){ selectedInfo.textContent=`Viszonylat: ${currentRoute}`; } else selectedInfo.textContent="‚Äî"; }
function modeIsStop(){ return $("#modeStop").checked; }

$("#btnSearch").onclick=async()=>{
  const qq=q.value.trim(); if(!qq) return;
  try{
    if(modeIsStop()){
      const r=await api(`/api/stops/search?q=${encodeURIComponent(qq)}`); const arr=await r.json();
      setSel(results, arr, "id", "name");
      if(arr.length){ results.onchange(); results.style.display="block"; } else { showToast("Nincs tal√°lat", false); }
    }else{
      const r=await api(`/api/routes/search?q=${encodeURIComponent(qq)}`); const arr=await r.json();
      // arr lehet egyszer≈± string lista vagy objektum; normaliz√°ljuk
      const norm=arr.map(x=> typeof x==="string"?({route:x,text:x}):({route:x.route||x.id,text:x.route||x.id}));
      results.innerHTML=""; norm.forEach(x=>{ const o=el("option","",x.text); o.value=x.route; results.appendChild(o); });
      results.style.display=norm.length?"block":"none";
      if(!norm.length) showToast("Nincs tal√°lat",false);
      if(norm.length) results.onchange();
    }
  }catch(e){ showToast("Keres√©s hiba",false); }
};

results.onchange=async()=>{
  if(modeIsStop()){
    const id=results.value; const name=results.options[results.selectedIndex]?.text||id;
    currentStop={id,name}; currentRoute=null; updateSelectedInfo();
    stopPanel.style.display="block"; routePanel.style.display="none";
    await renderDepartures();
  }else{
    currentRoute=results.value; currentStop=null; updateSelectedInfo();
    routePanel.style.display="block"; stopPanel.style.display="none";
    $("#routeActions").style.display="block";
    $("#mapWrap").style.display="none"; $("#routeStops").style.display="none";
  }
};

/* ===== Departures ===== */
function delayBadge(mins){
  if(mins==null) return "";
  const n=Number(mins);
  const cls = n>0 ? "warn" : (n<0 ? "muted" : "");
  const sign = n>0 ? "+" : "";
  return `<span class="mono ${cls}" style="margin-left:8px">${sign}${n}‚Ä≤</span>`;
}
async function renderDepartures(){
  if(!currentStop) return;
  try{
    const w=Math.max(1, Number($("#windowMin").value||60));
    const r=await api(`/api/stops/${encodeURIComponent(currentStop.id)}/next_departures?window=${w}`);
    const j=await r.json();
    const list=$("#departures"); list.innerHTML="";
    (j.departures||[]).forEach(row=>{
      const it=el("div","item");
      const dueClass = row.is_due ? "due" : (row.is_live ? "ok" : "");
      it.innerHTML = `
        <div class="pill">${row.route||"‚Äì"}</div>
        <div>${row.destination||"‚Äì"}</div>
        <div class="time mono ${dueClass}">${row.is_due ? "DUE" : (row.time_display||"‚Äì")}${delayBadge(row.delay_min)}</div>`;
      it.onclick=()=>openTrip(row.trip_id,row.route,row.destination);
      list.appendChild(it);
    });
    if(!(j.departures||[]).length){ list.appendChild(el("div","muted","Nincs indul√°s az id≈ëablakban.")); }
  }catch(e){ showToast("Indul√°sok lek√©rdez√©se sikertelen", false); }
}
$("#refreshBtn").onclick=renderDepartures;
setInterval(()=>{ if(currentStop) renderDepartures(); }, 20000);

/* ===== Trip modal ===== */
function openTrip(tripId, route, headsign){
  if(!tripId) return;
  (async()=>{
    try{
      const r=await api(`/api/trips/${encodeURIComponent(tripId)}`); const j=await r.json();
      const box=$("#tripBox"); box.innerHTML="";
      box.appendChild(el("div","row",null));
      const header=el("div",null,`J√°rat ¬∑ ${route||""} ‚Üí ${headsign||""}`);
      header.style.fontWeight="800"; box.appendChild(header);
      const list=el("div","list","");
      (j.stops||[]).forEach(s=>{
        const row=el("div","item"); row.innerHTML=`
          <div class="pill">‚è±</div>
          <div>${s.stop_name||""}</div>
          <div class="mono ${s.is_past?'muted':''}">${s.time_display||""}</div>`;
        list.appendChild(row);
      });
      box.appendChild(el("div","divider",""));
      box.appendChild(list);
      $("#tripModal").style.display="grid";
    }catch(e){ showToast("J√°rat megnyit√°sa sikertelen",false); }
  })();
}
$("#tripModal").onclick=(ev)=>{ if(ev.target.id==="tripModal") $("#tripModal").style.display="none"; };

/* ===== Route: map & directions ===== */
let map=null; let markers=[];
function ensureMap(){ if(map) return; map=L.map('mapWrap',{zoomControl:true}).setView([50.9097,-1.4044],12);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png',{maxZoom:19,attribution:'Leaflet | ¬© OpenStreetMap'}).addTo(map);
}
$("#btnShowMap").onclick=async()=>{
  if(!currentRoute) return;
  $("#mapWrap").style.display="block"; $("#routeStops").style.display="none";
  ensureMap(); markers.forEach(m=>m.remove()); markers=[];
  try{
    const r=await api(`/api/routes/${encodeURIComponent(currentRoute)}/vehicles`); const j=await r.json(); const vs=j.vehicles||[];
    vs.forEach(v=>{ const m=L.marker([v.lat,v.lon]).addTo(map).bindPopup(`${v.label||""}`); markers.push(m); });
    if(vs.length){ const g=L.featureGroup(markers); map.fitBounds(g.getBounds().pad(0.2)); }
  }catch(e){ showToast("J√°rm≈±vek bet√∂lt√©se sikertelen",false); }
};
$("#btnShowDirs").onclick=async()=>{
  if(!currentRoute) return;
  $("#routeStops").style.display="block"; $("#mapWrap").style.display="none";
  const wrap=$("#routeStops"); wrap.innerHTML="";
  try{
    // ir√°nyonk√©nt meg√°ll√≥lista ‚Üí itt a /api/trips/{tripId} nem ismert; csak egy egyszer≈± helykit√∂lt≈ë,
    // ha van dedik√°lt endpointod a route stops-ra, ide cser√©ld.
    wrap.appendChild(el("div","muted","Meg√°ll√≥lista endpoint nincs implement√°lva a backendben ‚Äì csak a t√©rk√©pes n√©zet √©l."));
  }catch(e){ showToast("Meg√°ll√≥k list√°z√°sa sikertelen",false); }
};

/* ===== Favourites ===== */
function favs(){ return JSON.parse(localStorage.getItem("favs")||'{"stops":[],"routes":[]}'); }
function saveFavs(x){ localStorage.setItem("favs", JSON.stringify(x)); renderFavs(); renderFavButton(); }
function renderFavButton(){
  const b=$("#favToggle");
  if(currentStop){ const on=favs().stops.some(s=>s.id===currentStop.id); b.textContent=(on?"‚òÖ ":"‚òÜ ")+STR[LANG].favs; }
  else if(currentRoute){ const on=favs().routes.some(r=>r.id===currentRoute); b.textContent=(on?"‚òÖ ":"‚òÜ ")+STR[LANG].favs; }
  else b.textContent="‚òÜ "+STR[LANG].favs;
}
$("#favToggle").onclick=()=>{
  const f=favs();
  if(currentStop){
    const i=f.stops.findIndex(s=>s.id===currentStop.id);
    if(i>=0) f.stops.splice(i,1); else f.stops.push({id:currentStop.id,name:currentStop.name});
  }else if(currentRoute){
    const i=f.routes.findIndex(r=>r.id===currentRoute);
    if(i>=0) f.routes.splice(i,1); else f.routes.push({id:currentRoute});
  }else return;
  saveFavs(f); renderFavs(); renderFavButton();
};
function renderFavs(){
  const f=favs(); const fs=$("#favStops"), fr=$("#favRoutes"); fs.innerHTML=""; fr.innerHTML="";
  f.stops.forEach(s=>{
    const it=el("div","item"); it.innerHTML=`<div class="pill">‚òÖ</div><div>${s.name||s.id}</div><div><button class="btn ghost">Megnyit</button></div>`;
    it.querySelector("button").onclick=()=>{ $("#modeStop").checked=true; results.innerHTML=`<option value="${s.id}">${s.name||s.id}</option>`; results.style.display="block"; results.onchange(); };
    fs.appendChild(it);
  });
  f.routes.forEach(r=>{
    const it=el("div","item"); it.innerHTML=`<div class="pill">‚òÖ</div><div>${r.id}</div><div><button class="btn ghost">Megnyit</button></div>`;
    it.querySelector("button").onclick=()=>{ $("#modeRoute").checked=true; results.innerHTML=`<option value="${r.id}">${r.id}</option>`; results.style.display="block"; results.onchange(); };
    fr.appendChild(it);
  });
}
renderFavs();

/* ===== Drawer actions ===== */
$("#miFavClear").onclick=()=>{ localStorage.setItem("favs",'{"stops":[],"routes":[]}'); renderFavs(); showToast("Kedvencek t√∂r√∂lve"); };
$("#miFavRefresh").onclick=()=>{ renderFavs(); showToast("Kedvencek friss√≠tve"); };
$("#miAbout").onclick=()=>{ showToast("Bluestar ‚Äì egyszer≈± meg√°ll√≥ & viszonylat keres≈ë"); };
$("#miInfo").onclick=()=>{ showToast("K√∂zleked√©si inf√≥k: csak dem√≥ cimk√©k",false); };
$("#miTheme").onclick=()=>{ showToast("Dark t√©ma akt√≠v"); };

/* ===== Misc ===== */
setInterval(()=>{ renderFavButton(); }, 1500);
updateSelectedInfo();
</script>
</body>
</html>
